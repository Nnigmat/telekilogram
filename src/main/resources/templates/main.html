<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="'Telekilogram: ' + ${room.getName()}"></title>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="container">
    <div th:replace="fragments/navbar :: navbar (title=${room.getName()}, usr=${user})"></div>
    <div class="row">
        <div class="col l8" style="overflow-y:scroll; max-height: 700px; word-wrap: break-word;" id="messageBody">
            <ul th:replace="fragments/message :: messages (${messages})"></ul>
        </div>
        <div class="col l4" style="overflow-y:scroll; max-height: 700px; word-wrap: break-word;">
            <h6>Admins</h6>
            <ul th:replace="fragments/members :: members (${admins})"></ul>
            <h6>Moderators</h6>
            <ul th:replace="fragments/members :: members (${moderators})"></ul>
            <h6>Members</h6>
            <ul th:replace="fragments/members :: members (${members})"></ul>
        </div>
    </div>
    <form method="post" th:if="${!user.isBanned()}">
        <div class="row">
            <div class="row">
                <div class="input-field col s6">
                    <i class="material-icons prefix">mode_edit</i>
                    <textarea id="icon_prefix2" class="materialize-textarea" name="text"></textarea>
                    <label for="icon_prefix2" class="" >Message</label>
                </div>
                <button type="submit" class="waves-effect waves-teal btn-flat btn-large">Send <i class="material-icons right">send</i></button>
            </div>
        </div>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    </form>
    </div>

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>
        var messageBody = document.querySelector("#messageBody");
        messageBody.scrollTop = messageBody.scrollHeight - messageBody.clientHeight;
    </script>
</body>
</html>